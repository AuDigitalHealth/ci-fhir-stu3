<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="practitioner-dh-base-1"/>
  <url
    value="http://ns.electronichealth.net.au/ci/fhir/3.0/StructureDefinition/practitioner-dh-base-1"/>
  <version value="1.0.0"/>
  <name value="PractitionerBase"/>
  <title value="Base Practitioner"/>
  <status value="draft"/>
  <experimental value="true"/>
  <publisher value="Australian Digital Health Agency"/>
  <contact>
    <telecom>
      <system value="email"/>
      <value value="help@digitalhealth.gov.au"/>
    </telecom>
  </contact>
  <description
    value="The purpose of this profile is to provide a base model for the concept of a practitioner, defining fundamental concepts that form a conforming representation of a practitioner. It is used as a base model from which to further derive models for specific usage scenarios in an Australian context and where it is desirable to provide some constraint to support unique identification of the practitioner.&#xA;&#xA;#### Must Support&#xA;&#xA;In the context of this profile [Must Support](http://hl7.org/fhir/STU3/conformance-rules.html#mustSupport) SHALL be interpreted as follows:&#xA;&#xA;* The system SHALL be able to include the element when authoring a resource where data is available&#xA;&#xA;* The system SHALL be able to store and retrieve the element&#xA;&#xA;* The system SHALL be able to process resources containing the element"/>
  <copyright
    value="Copyright Â© 2019 Australian Digital Health Agency - All rights reserved. This content is licensed under a Creative Commons Attribution 4.0 International License. See https://creativecommons.org/licenses/by/4.0/."/>
  <fhirVersion value="3.0.1"/>
  <kind value="resource"/>
  <abstract value="false"/>
  <type value="Practitioner"/>
  <baseDefinition value="http://hl7.org.au/fhir/StructureDefinition/au-practitioner"/>
  <derivation value="constraint"/>
  <differential>
    <element id="Practitioner">
      <path value="Practitioner"/>
      <constraint>
        <key value="inv-dh-prac-01"/>
        <severity value="error"/>
        <human value="The practitioner shall at least have an identifier or a name"/>
        <expression value="identifier.exists() or name.exists()"/>
      </constraint>
    </element>
    <element id="Practitioner.identifier">
      <path value="Practitioner.identifier"/>
      <mustSupport value="true"/>
    </element>
    <element id="Practitioner.identifier:employeeNumber">
      <path value="Practitioner.identifier"/>
      <sliceName value="employeeNumber"/>
      <short value="Employee Number"/>
    </element>
    <element id="Practitioner.identifier:employeeNumber.type">
      <path value="Practitioner.identifier.type"/>
      <short value="Employee number type"/>
      <min value="1"/>
      <patternCodeableConcept>
        <coding>
          <system value="http://hl7.org/fhir/v2/0203"/>
          <code value="EI"/>
        </coding>
      </patternCodeableConcept>
    </element>
    <element id="Practitioner.identifier:employeeNumber.type.coding">
      <path value="Practitioner.identifier.type.coding"/>
      <min value="1"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/au-hl7v2-0203"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="Practitioner.identifier:employeeNumber.type.coding.system">
      <path value="Practitioner.identifier.type.coding.system"/>
      <min value="1"/>
      <fixedUri value="http://hl7.org/fhir/v2/0203"/>
    </element>
    <element id="Practitioner.identifier:employeeNumber.type.coding.code">
      <path value="Practitioner.identifier.type.coding.code"/>
      <min value="1"/>
      <fixedCode value="EI"/>
    </element>
    <element id="Practitioner.identifier:employeeNumber.system">
      <path value="Practitioner.identifier.system"/>
      <short value="Namespace for employee number"/>
      <min value="1"/>
      <example>
        <label value="1"/>
        <valueUri
          value="http://ns.electronichealth.net.au/id/hpio-scoped/service-provider-individual/1.0/8003620000000000"
        />
      </example>
      <example>
        <label value="2"/>
        <valueUri
          value="http://ns.electronichealth.net.au/id/abn-scoped/service-provider-individual/1.0/51824753556"
        />
      </example>
    </element>
    <element id="Practitioner.identifier:employeeNumber.value">
      <path value="Practitioner.identifier.value"/>
      <short value="Employee number"/>
      <min value="1"/>
      <example>
        <label value="1"/>
        <valueString value="frankburns27"/>
      </example>
    </element>
    <element id="Practitioner.active">
      <path value="Practitioner.active"/>
      <mustSupport value="true"/>
    </element>
    <element id="Practitioner.name">
      <path value="Practitioner.name"/>
      <type>
        <code value="HumanName"/>
        <profile
          value="http://ns.electronichealth.net.au/ci/fhir/3.0/StructureDefinition/humanname-dh-base-1"
        />
      </type>
      <mustSupport value="true"/>
    </element>
    <element id="Practitioner.telecom">
      <path value="Practitioner.telecom"/>
      <mustSupport value="true"/>
    </element>
    <element id="Practitioner.address">
      <path value="Practitioner.address"/>
      <mustSupport value="true"/>
    </element>
    <element id="Practitioner.gender">
      <path value="Practitioner.gender"/>
      <mustSupport value="true"/>
    </element>
    <element id="Practitioner.birthDate">
      <path value="Practitioner.birthDate"/>
      <mustSupport value="true"/>
    </element>
    <element id="Practitioner.photo">
      <path value="Practitioner.photo"/>
      <max value="0"/>
    </element>
    <element id="Practitioner.qualification">
      <path value="Practitioner.qualification"/>
      <constraint>
        <key value="inv-dh-prac-02" />
        <severity value="error" />
        <human value="The issuer reference shall at least have a reference, an identifier or a display" />        
        <expression value="issuer.exists() implies (issuer.reference.exists() or issuer.identifier.exists() or issuer.display.exists())" />
      </constraint>
      <constraint>
        <key value="inv-dh-prac-03" />
        <severity value="error" />
        <human value="The issuer organisation shall conform to Base Organization" />
        <expression value="issuer.exists() implies issuer.reference.resolve().conformsTo('http://ns.electronichealth.net.au/ci/fhir/3.0/StructureDefinition/organization-dh-base-1')" />
      </constraint>
      <mustSupport value="true"/>
    </element>
    <element id="Practitioner.communication">
      <path value="Practitioner.communication"/>
      <mustSupport value="true"/>
    </element>
  </differential>
</StructureDefinition>
